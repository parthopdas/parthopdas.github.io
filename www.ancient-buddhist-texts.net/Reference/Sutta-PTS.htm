<!DOCTYPE html>
<html lang="en">

<head>

<base target="_blank">

<meta charset="utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Sutta and Jātaka number and name, links and PTS page number</title>

<link rel="StyleSheet" type="text/css" href="../includes/Main.css" />
<script type="text/javascript" src="../includes/sutta-data.js"></script>

<style type="text/css" media="screen">
#TableInput1 {
 width: 100%; /*width */
}
#TableInput2 {
 width: 100%; /*width */
}

#SuttaTable {
 /* border-collapse: collapse; Collapse borders */
 /*width: 100%; Full-width */
 font-size: 18px; /* Increase font-size */
}

#SuttaTable th, #SuttaTable td {
 text-align: left; /* Left-align text */
 padding: 12px; /*Add padding */
 border: 1px solid darkgrey; /* Add a grey border */
}

#SuttaTable tr {
 /* Add a bottom border to all table rows */
 border-bottom: 1px solid #ddd;
}

#SuttaTable tr.header, #SuttaTable tr:hover {
 /* Add a grey background color to the table header and on hover */
 background-color: #f1f1f1;
}
.leftc {
 width:320px;
}
.middlec {
 width:120px;
}
.rightc {
 width:280px;
}
vr {
display:none;
}

</style>

<script type="text/javascript" src="open-graph.js"></script>
<script type="text/javascript" src="../includes/Includes-Top-Level.js"></script>

</head>

<body>

<div style="max-width:720px; margin:auto;">
<p class="NavBar1"><script type="text/javascript" src="../includes/Header-Top-Level+Link.js"></script></p>

<p>&#160;</p>

<p class="Heading3">Sutta and Jātaka number and name, links and PTS page number</p>

<div class="justify">

<p>The original data input is originally by Leigh Brasington on <a href="http://www.leighb.com/suttanbrxref.htm">this page</a>. I have put this in a table, and made it possible to filter the table for a quick find, and have also added in links to the suttas in Pāḷi as found on <a href="https://suttacentral.net/">Sutta Central</a>, from which it is normally possible to find an English translation also. </p>

<p>I have added in the Jātakas, with links to their English translation (the page numbers refer to the Pāḷi edition, not the translation). The links to the Jātaka Pāḷi are only to the verses, as Sutta Central does not include commentarial material; whereas the link to the translation is to both commentary and verses. I have now also added in Khuddakapāṭha, Dhammapada (chapter title only), Udāna, Itivuttaka, Suttanipāta, Vimānavatthu and Petavatthu.</p>

<p class="indent3">The way to interpret the numbers is like this:<br><br>
<b>DN 6: Mahāli</b> <br>
Dīghanikāya, sutta no 6, called Mahālisutta.<br>
DN i 150 = the PTS volume and page number, here volume i, pg 150ff.<br><br>
In the case of Saṁyuttanikāya there are two references, like this:<br>
<b>SN 8.7 [SN 215]: Pavaraṇa, SN i 190 {i 410}</b><br>
SN 8.7 = Saṁyutta 8, sutta no 7, called Pavaraṇasutta.<br>
SN 215 means it is the 215th sutta of that collection<br>
SN i 190 refers to Somaratne’s PTS edition (1998)<br>
SN i 410 refers to Feer’s edition (1884-1898).</p>

<p>You can search by Nikāya or Jātaka number, or by name (diacritics are needed), and also by PTS page number, but because of limitations on the data input, which only gives the starting page for a sutta, a search for "DN i 2" will not turn up the sutta found at Dīghanikāya Vol. i, pg 2, as that page number is not listed, instead it will show DN i 204, DN i 211, DN i 224, DN i 235. Please bear these limitations in mind when filtering. </p>

<p>Because of limitations in the way Saṁyutta and Aṅguttara suttas are linked on Sutta Central, some of the links may not work, in which case you will need to track down the sutta using the links on the site itself. </p>

<p>You can filter with or without diacritics, searching with will yield greater results, but searching with will be more specific. </p>

</div>

</div>

<p>&#160;</p>

<table id="SuttaTable">
<tr class="header">
 <th class="leftc">Sutta Number and Name</th>
 <th class="middlec">Links</th>
 <th class="rightc">PTS Volume and Page Number</th>
</tr>

<tr>
<th class="leftc"><input type="text" id="TableInput1" onkeyup="FilterSutta()" placeholder="Sutta name and number..."></th>
<th class="middlec" style="visibility:hidden;" id="myHiddenInput" >&#160;</th>
<th class="rightc"><input type="text" id="TableInput2" onkeyup="FilterPageNumber()" placeholder="Volume and page number..."></th>
</tr>

<!-- Book name -->

<!-- 
One number, e.g. Iti 94
<tr><td><p>pv. (\d*)\.(.*?)</p></td></tr>

<tr><td><p>pv $1. $2</p></td><td><p><a href="https://suttacentral.net/pv$1/pli/ms">Pāḷi</a>&#x2003;<a href="https://suttacentral.net/pv$1/en/ireland">Eng</a></p></td></tr>

Two numbers, e.g. Ud 1.7
<tr><td><p>pv. (\d*).(\d*)\.(.*?)</p></td></tr>

<tr><td><p>SN (\d*)\.(.*?)\.(.*?)</p></td></tr>

<tr><td><p>SN $1.$2 $3</p></td><td><p><a href="https://suttacentral.net/sn$1.$2/pli/ms">Pāḷi</a>&#x2003;<a href="https://suttacentral.net/sn$1.$2/en/sujato">Eng</a></p></td></tr>

<tr><td><p>AN 1.1-10. Rūpādivaggo</p></td></tr>

<tr><td><p>AN (\d*)\.(\d*)-(\d*)\.(.*?)</p></td></tr>

<tr><td><p>AN $1.$2 $3</p></td><td><p><a href="https://suttacentral.net/an$1.$2/pli/ms">Pāḷi</a>&#x2003;<a href="https://suttacentral.net/an$1.$2/en/sujato">Eng</a></p></td></tr>

<tr><td><p>AN $1. $2vaggo</p></td><td><p><a href="https://suttacentral.net/an$1-\L$2vagga">Pāḷi</a>&#x2003;<a href="https://suttacentral.net/an$1-\L$2vagga">Eng</a></p></td></tr>

// FOR PALI
<a href="https://suttacentral.net/(.*?)ā(.*?)">pāḷi

// FOR ENGLISH
;<a href="https://suttacentral.net/(.*?)ā(.*?)">eng

āīūṅñṇṭḍṁḷ

-->

</table>

<script>

function FilterSutta() {
    // Declare variables
    var input, filter, table, tr, td, i;
    input = document.getElementById("TableInput1");
    filter = input.value.toLowerCase();
    table = document.getElementById("SuttaTable");
    tr = table.getElementsByTagName("tr");

    /** JANAKA's code */

     if (filter.length < 3) filter = ""
    const variations = { 
        'a': '[aā]',
        't': '[tṭ]',
        'n': '[nñṇṅ]',
        'i': '[iī]',
        'd': '[dḍ]',
        'l': '[lḷ]',
        'm': '[mṁṃ]',
    }
    const str = filter.replace(/[atnidlm]/g, (m) => variations[m])
    const filterRegex = new RegExp(str)
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
            //if (td.innerHTML.toLowerCase().indexOf(filter) > -1) {
            if (td.innerHTML.toLowerCase().search(filterRegex) > -1) {
                tr[i].style.display = "";
            } else {
                tr[i].style.display = "none";
            }
        }
    }
}

const checkPtsFilterMatch = (cellText, filter, ptsPartsInFilter, suttaDataGroups) => {
  const cellTextLower = cellText.toLowerCase()
  let intermediateFilter = null
  if (ptsPartsInFilter && cellTextLower.indexOf(`${ptsPartsInFilter[0]} `) > -1) {
    const sg = suttaDataGroups[ptsPartsInFilter[0]]
    const intermediateSutta = _.find(sg, (s, i) => {
      const found =
        (suttaDataGroups[ptsPartsInFilter[0]][i].pts.p <= ptsPartsInFilter[1]) 
        && (!suttaDataGroups[ptsPartsInFilter[0]][i + 1]?.pts 
            || (suttaDataGroups[ptsPartsInFilter[0]][i + 1]?.pts.p > ptsPartsInFilter[1]))
      console.log('!!!!', cellText, ptsPartsInFilter[1], s, i, found)
      return found
    })
    if (intermediateSutta) {
      intermediateFilter = `${ptsPartsInFilter[0]} ${intermediateSutta.pts.p}`
    }
    console.log('>>>>', intermediateFilter)
  }
  return cellTextLower === filter || (intermediateFilter && cellTextLower === intermediateFilter)
}

const getSuttaDataGroupsFn = () => _.memoize(() => _.groupBy(suttaData, s => `${s.pts?.n ?? ''} ${s.pts?.v ?? ''}`.toLowerCase()))

function FilterPageNumber() {
  const suttaDataGroups = getSuttaDataGroupsFn()()

  const input = document.getElementById("TableInput2");
  const filter = input.value.toLowerCase().trim();
  const table = document.getElementById("SuttaTable");
  const tr = table.getElementsByTagName("tr");

  // Loop through all table rows, and hide those who don't match the search query
  let ptsPartsInFilter = null
  ptsMatch = filter.match(/^(([a-z]{1,2}) (IX|IV|V?I{0,3})) (\d+)$/i)
  if (ptsMatch) {
    ptsPartsInFilter = [ptsMatch[1], parseInt(ptsMatch[4], 10)]
  }
  
  let td = null
  for (let i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[2]
    if (!td) {
      continue
    }

    if (checkPtsFilterMatch(td.innerHTML, filter, ptsPartsInFilter, suttaDataGroups)) {
      tr[i].style.display = "";
    } else {
      tr[i].style.display = "none";
    }
  }
}

const ptsToString = pts => {
  if (pts) {
    return `${pts.n} ${pts.v} ${pts.p}`
  }

  return ''
}

// Load the sutta table
suttaRows = 
  suttaData
    .map((s, i) => `<tr><td><p>${s.sutta}</p></td><td><p><a href="https://suttacentral.net/${s.pi}">Pāḷi</a>&#x2003;<a href="https://suttacentral.net/${s.en}">Eng</a></p></td><td data-sd-index="${i}">${ptsToString(s.pts)}</td></tr>`)
    .reduce((acc, e) => acc + e, '')


$('#SuttaTable').append(suttaRows)

</script>

<p>&#160;</p>

<p class="NavBar3"><a href="../Miscellaneous/History.htm#New" title="see the history of this website" target="_top">last updated: July 2020</a></p>

<footer style="clear:both"><div class="center"><script type="text/javascript" src="../includes/Footer-Top-Level.js"></script><img src="../logo.png" alt="Ancient Buddhist Texts" style="width:240px;" /></div></footer>

<script type="text/javascript" src="../includes/underscore-min.js"></script>
<script type="text/javascript" src="../includes/jquery-3.5.1.min.js"></script>

</body>

</html>
